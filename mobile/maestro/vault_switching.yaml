appId: com.tokenmetric.dev
---
# Vault Switching Flow Test
# Tests switching between different vaults
# Prerequisites: User is connected

- runFlow: connect_wallet.yaml

# Navigate to vaults list
- tapOn: "Vaults"

# =====================================================================
# View available vaults
# =====================================================================
- assertVisible: "Available Vaults"

# Should see multiple vault options
- assertVisible:
    - "Stable Vault"
    - "High Yield Vault"
    - "Balanced Vault"

# Each vault should show key info
- assertVisible: "TVL"
- assertVisible: "APY"
- assertVisible: "Your Balance"

# =====================================================================
# Switch to different vault
# =====================================================================
- tapOn: "High Yield Vault"

# Verify vault details loaded
- assertVisible: "High Yield Vault"
- assertVisible: "TVL:"
- assertVisible: "APY:"
- assertVisible: "Protocols:"

# Check protocol allocation info
- assertVisible: "Protocol Allocation"
- assertVisible:
    - "Aave"
    - "Compound"

# =====================================================================
# Compare vaults
# =====================================================================
- tapOn: "Back"
- tapOn: "Compare Vaults"

# Should see comparison view
- assertVisible: "Vault Comparison"
- assertVisible: "Stable Vault"
- assertVisible: "High Yield Vault"
- assertVisible: "Balanced Vault"

# Comparison metrics
- assertVisible: "TVL"
- assertVisible: "APY"
- assertVisible: "Risk Level"
- assertVisible: "Your Balance"

# =====================================================================
# Switch back to original vault
# =====================================================================
- tapOn: "Stable Vault"

# Verify state preserved
- assertVisible: "Your Balance:"
